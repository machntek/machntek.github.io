---
title: "오브젝트(3) - 역할, 책임, 협력"
date: 2020-02-10T21:34:30-04:00
categories:
  - OOP
tags:
  - 오브젝트
  - OOP
  - Object
---

객체지향의 본질은 협력하는 객체들의 공동체를 창조하는 것이다.

## 01. 협력
객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 **협력** 이라고 한다.
객체가 협력에 참여하기 위해 수행하는 로직은 **책임**이라고 부른다.
객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **역할**을 구성한다.

### 협력
두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다.
**메시지 전송**은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다.
메시지를 수신한 객체는 메시지를 어떻게 처리할 지 직접 결정한다.(내부 구현을 통해서).  이는 객체가 자신의 일을 스스로 처리할 수 있는 자율적인 존재라는 것을 의미한다.

객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 캡슐화하는 것이다. 캡슐화를 통해 변경에 대한 파급효과를 제한할 수 있기 때문에 자율적인 객체는 변경하기도 쉬워진다.

### 협력이 설계를 위한 문맥을 결정한다.
애플리케이션 안에 어떤 객체가 필요하다면 그 이유는 단 하나여야한다. 그 객체가 어떤 협력에 참여하는것이 그 이유다.
객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다.
협력이 바뀌면 객체가 제공해야 하는 행동 역시 바뀌어야 한다.
그리고 객체의 상태를 결정하는 것은 행동이다. 객체의 상태는 그 객체가 행동을 수행하는 데 필요한 정보가 무엇인지로 결정된다.

Movie가 기본 요금인 fee와 할인 정책인 discountPolicy라는 인스턴스 변수를 상태로 포함하는 이유는 요금계산이라는 행동에 필요한 정보이기 때문이다.
```
public class Movie{
    private Money fee;
    private DiscountPolicy discountPolicy;
    
    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```
협력은 객체를 설계하는 데 필요한 일종의 문맥을 제공한다(협력에 필요한 메시지 -> 객체의 행동, 행동 수행에 필요한 정보 -> 객체의 상태)

